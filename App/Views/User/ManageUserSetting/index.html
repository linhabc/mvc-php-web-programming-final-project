<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>User Settings</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/ManageUser/style.css" />

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <script src="js/User/index.js"></script>
</head>

<body>
    <header>
        <div class="left">
            <h3>Test <span>Yourself</span></h3>
        </div>
        <?php
        if (isset($user)) {
        # var_dump($user);
        setcookie("uid", $user["id"], time() + (86400 * 30), "/");
        setcookie("email", $user["email"], time() + (86400 * 30), "/");
        setcookie("username", $user["username"], time() + (86400 * 30), "/");
        setcookie("role", $user["role"], time() + (86400 * 30), "/");
        } ?>
        <div id="hello-username">Hello</div>
        <div class="right">
            <a href="?Authentication/index" class="logout-button">Logout</a>
        </div>
    </header>

    <div class="side-bar">
        <center>
            <h4>Personal Info</h4>
        </center>
        <a class="navLink" href="?user/Users/index" onclick="return handleSideBarButton(event)"><i
                class="material-icons">dashboard</i><span>Dashboard</span></a>
        <a class="navLink" href="?user/QuickTest/index" onclick="return handleSideBarButton(event)"><i
                class="material-icons">account_box</i><span>Doing Quick Test</span></a>
        <a class="navLink" href="?user/GroupTest/index" onclick="return handleSideBarButton(event)">
            <i class="material-icons">chrome_reader_mode</i>
            <span>Doing Group Test</span></a>
        <a class="navLink" href="?user/ManageCustomTest/index" onclick="return handleSideBarButton(event)"><i
                class="material-icons">dvr</i><span>Custom Test</span></a>
        <a class="navLink" href="?user/ManagePersonalInfo/index" onclick="return handleSideBarButton(event)"><i
                class="material-icons">dvr</i><span>Personal Info</span></a>
        <a class="navLink active" href="?user/ManageUserSetting/index" onclick="return handleSideBarButton(event)"><i
                class="material-icons">settings</i><span>Personal settings</span></a>
    </div>

    <div class="content" id="content">
        <div class="grid-container">
            <div class="user-table">
                <h2 style="margin: 0px; margin-bottom: 40px;">
                    User Information
                </h2>

                <?php       
                foreach ($users as $user) {
                    echo "
                    <form action=\"?user/ManageUserSetting/edit\" method=\"post\" onsubmit=\"alertSuccess()\"> 
                            <span>Username: </span><br><br>
                            <input class=\"username-class\" type=\"text\" name=\"username\" value=\"$user[username]\"><br><br>

                            <span>Password: </span><br><br>
                            <input class=\"username-class\" type=\"text\" name=\"password\" value=\"$user[password]\"><br><br><br>

                            <button type=\"submit\" class=\"edit\"><img src=\"images/create.svg\">Edit</button><br><br>
                            
                            
                    </form>
                    ";   
                }       
                if (isset($user)) {
                    # var_dump($user);
                    setcookie("username", $user["username"], time() + (86400 * 30), "/");
                }                   
                ?>
            </div>
        </div>
    </div>

    <script src="js/index.js"></script>
    <script>
        var x = document.cookie;
        var username = getCookie("username");

        function confirmLogout() {
            var r = confirm("Are you sure you want to logout?");
            if (r == true) {
                location.href = "?Authentication/index";
            }
        }
        console.log(username);

        document.getElementById("hello-username").innerText =
            "Hello " + username + " ";
    </script>

    <script>
        function alertSuccess() {
            alert('Edit success!');
        }
    </script>

</body>

</html>